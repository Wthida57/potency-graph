<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Potency Interactive Graph (Log Scale)</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <h3>Potency and EC50 (Log X-Axis)</h3>
  <label for="ec50">EC50 (lower = more potent):</label>
  <input type="range" id="ec50" min="1" max="100" value="10" />
  <span id="ec50-value">10</span>
  <div id="plot"></div>

  <script>
    function updatePlot(ec50) {
      const D = Array.from({ length: 100 }, (_, i) => Math.pow(10, i * 0.02)); // 1â€“100 log scale
      const E = D.map(d => 100 * d / (parseFloat(ec50) + d)); // Emax = 100

      Plotly.newPlot('plot', [{
        x: D,
        y: E,
        mode: 'lines',
        name: `EC50 = ${ec50}`
      }], {
        title: 'Dose-Response Curve with Log X-Axis',
        xaxis: {
          title: 'Drug Concentration (log scale)',
          type: 'log',
          range: [0, 2] // log10(1) to log10(100)
        },
        yaxis: {
          title: 'Effect (%)',
          range: [0, 110]
        }
      });
    }

    const ec50Slider = document.getElementById('ec50');
    const ec50Value = document.getElementById('ec50-value');

    ec50Slider.addEventListener('input', function () {
      ec50Value.textContent = this.value;
      updatePlot(this.value);
    });

    updatePlot(ec50Slider.value); // initial render
  </script>
</body>
</html>
